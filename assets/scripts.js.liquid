document.querySelectorAll('form[action="/cart/add"]').forEach((form) => {
  form.addEventListener('submit', (event) => {
    event.preventDefault();
    const formData = new FormData(event.currentTarget);
    const product = {
      id: formData.get('id'),
      quantity: formData.get('quantity'),
    };
    fetch('/cart/add.js', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(product),
    })
      .then((response) => response.json())
      .then((data) => {
        console.log(data);
        window.location.href = '/cart';
      })
      .catch((error) => {
        console.error('Error:', error);
      });
  });
});
